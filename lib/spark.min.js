
(function($,progress,window){"use strict";if($&&progress&&typeof window.spark==="undefined"){var jsdoUsername=null;var jsdoPassword=null;var _jsdoSession=null;var optionDefaults={id:"",filterQuery:"",data:{},success:false,error:false};var _sessionName=null;window.spark={version:"v3.0.3 (2017.03.23.012826)",field:{},form:{},grid:{},loader:{},nav:{},notify:{},strings:{},jsdoError:function(ev){var jsdo=((ev.xhr||{}).jsdo||{getErrors:function(){return[];}});var errorArray=jsdo.getErrors();var errors=[];$.each(errorArray,function(i,error){switch(error.type){case-1:var errObj=null;if(error.responseText){try{errObj=JSON.parse(error.responseText||"");}
catch(e){console.log("Error while parsing response: "+error.responseText||"N/A");}}
if(errObj&&typeof(errObj)==="object"){$.each(errObj,function(dsName,ds){if(ds["prods:errors"]){$.each(ds["prods:errors"],function(ttName,tt){$.each(tt,function(j,ttErr){errors.push(ttErr["prods:error"]);});});}});}else{errors.push(error.error);}
break;case-2:errors.push(error.error+" ("+error.errorNum+")");break;case-3:errors.push(error.error);break;case-4:errors.push(error.error);break;default:console.log("Unknown error:",error);}});if(errors.length===0&&ev.errorThrown!==""){errors.push(ev.errorThrown);}
if(errors.length>0){console.warn("Errors: ",errors);if(app.showMessage){app.showMessage(errors,"error");}else{alert(errors[0]);}}
ev.preventDefault();return false;},jsdoFailure:function(jsdo,success,request){if(request.xhr&&request.xhr.status===401||request.xhr.status===403){if(window.spark.jsdoAuthError){window.spark.jsdoAuthError(request);}else{alert("Session has expired. Please login again.");}}else if(request.response&&request.response._errors&&request.response._errors.length>0){var errorMsg="";var idxError=null;var lenErrors=request.response._errors.length;var errorEntry="";for(idxError=0;idxError<lenErrors;idxError+=1){errorEntry=request.response._errors[idxError]||{};errorMsg=errorMsg+" "+errorEntry._errorMsg||"UNKNOWN";}
if($.trim(errorMsg)!==""){console.warn(errorMsg);}}},createSession:function(serviceURI,catalogURI,authModel,sessionName){if(!_jsdoSession){if(!_sessionName){if(sessionName){_sessionName=sessionName;}else{this.setSessionName(serviceURI);}}
_jsdoSession=new progress.data.JSDOSession({authenticationModel:authModel||progress.data.Session.AUTH_TYPE_ANON,serviceURI:serviceURI||null,name:_sessionName||"JSDOSession_Default"});}
if(catalogURI){if(_jsdoSession.loginResult===progress.data.Session.LOGIN_SUCCESS){return _jsdoSession.isAuthorized().then(function(session,result,info){return window.spark.loadCatalogs(catalogURI);},function(session,result,info){return window.spark.loadCatalogs(catalogURI);});}else{var username=jsdoUsername||"anonymous";var password=jsdoPassword||"";return _jsdoSession.login(username,password).then(function(){return window.spark.loadCatalogs(catalogURI);},function(){return"Unable to reach the REST adapter to establish a session.";});}}else{var promise=jQuery.Deferred();promise.resolve("No catalog(s) requested.");return promise;}},loadCatalogs:function(catalogURI){_jsdoSession.catalogLoaded={};if(typeof catalogURI=="string"){_jsdoSession.catalogLoaded[catalogURI]=false;}else if(catalogURI instanceof Array){$.each(catalogURI,function(i,catalog){_jsdoSession.catalogLoaded[catalog]=false;});}
return _jsdoSession.addCatalog(catalogURI).then(function(session,result,responses){$.each(responses,function(i,response){_jsdoSession.catalogLoaded[response.catalogURI]=(response.result?true:false);});return responses;},function(session,result,responses){console.log("Response:",responses);return"Failed to load catalog(s).";});},createJSDO:function(resourceName){var jsdo=null;$.each(_jsdoSession.JSDOs,function(i,j){if(j.name===resourceName){jsdo=j;return;}});return(jsdo||(new progress.data.JSDO({name:resourceName})));},getMessages:function(response){if(response.response){response=response.response;}
if(response&&response._errors&&response._errors.length>0){return response._errors||false;}
return false;},showMessage:function(message,showMethod){var errorMsg=message._errorMsg||"";var errorType=null;switch(message._errorType.toLowerCase()){case"error":case"fatal":case"trace":errorType="error";break;case"validation":case"warning":errorType="warning";break;default:errorType="info";}
if(errorMsg!==""&&errorType&&showMethod){showMethod(errorMsg,errorType);}},setCredentials:function(username,password){jsdoUsername=username||null;jsdoPassword=password||null;},setSessionName:function(sessionName){_sessionName=sessionName.replace(/\//g,"");if(_sessionName===""){_sessionName="Root";}
_sessionName="JSDOSession_"+_sessionName;return _sessionName;},clone:function(originalProps,newProps){return $.extend(true,{},originalProps,newProps);},toProperCase:function(string){return string.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});},getJsdoSession:function(){return _jsdoSession;},getMergedOptions:function(options){return this.clone(optionDefaults,options);},getQueryStringValue:function(key){var urlParams=window.location.search;if(urlParams===""){urlParams=window.location.href;}
return unescape(urlParams.replace(new RegExp("^(?:.*[&\\?]"+escape(key).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));},createJSDODataSource:function(resourceName,options){var jsdo=window.spark.createJSDO(resourceName);var jsdoProps=jsdo.getMethodProperties("read");var capabilities=[];if(jsdoProps&&jsdoProps.capabilities){capabilities=jsdoProps.capabilities.split(",");}
var defaults={serverFiltering:capabilities.indexOf("filter")>-1,serverPaging:capabilities.indexOf("top")>-1,serverSorting:capabilities.indexOf("sort")>-1,transport:{jsdo:jsdo},type:"jsdo"};if(options.tableRef){defaults.transport.tableRef=options.tableRef;delete options.tableRef;}
return new kendo.data.DataSource($.extend(defaults,options));},jsdo_read:function(jsdoObj,options){var promise=null;var filterQuery=options.filterQuery||"";if(filterQuery===""){promise=jsdoObj.fill();}else{promise=jsdoObj.fill(filterQuery);}
promise.done(function(jsdo,success,request){}).fail(window.spark.jsdoFailure);return promise;},jsdo_create:function(jsdoObj,options){var currentRecord=options.data;var jsrecord=jsdoObj.add(currentRecord);var promise=jsdoObj.saveChanges();promise.done(function(jsdo,success,request){}).fail(window.spark.jsdoFailure);return promise;},jsdo_update:function(jsdoObj,options){var jsrecord={};if(options.tableRef&&jsdoObj[options.tableRef]){jsrecord=jsdoObj[options.tableRef].findById(options.id);}else{jsrecord=jsdoObj.findById(options.id);}
try{jsrecord.assign(options.data);}catch(e){options.error(null,null,e);}
var promise=jsdoObj.saveChanges();promise.done(function(jsdo,success,request){}).fail(window.spark.jsdoFailure);return promise;},jsdo_delete:function(jsdoObj,options){var jsrecord=jsdoObj.findById(options.id);try{jsrecord.remove();}catch(e){options.error(null,null,e);}
var promise=jsdoObj.saveChanges();promise.done(function(jsdo,success,request){}).fail(window.spark.jsdoFailure);return promise;}};}})(jQuery,progress,window);(function($,window){"use strict";if($&&typeof window.spark!=="undefined"){window.spark=$.extend(window.spark,{clearPersistentObject:function(key){var storage=window.localStorage||null;if(storage&&storage.clearObject){storage.clearObject(key);return true;}else if(storage){delete storage[key];return true;}else{window.spark.setCookie(key,"");return true;}
return false;},setPersistentObject:function(key,value){var storage=window.localStorage||null;if(storage&&storage.getObject){storage.setObject(key,value);return true;}else if(storage){storage[key]=JSON.stringify(value);return true;}else{window.spark.setCookie(key,JSON.stringify(value));return true;}
return false;},getPersistentObject:function(key){var storage=window.localStorage||null;if(storage&&storage.getObject){return storage.getObject(key);}else if(storage){var storageValue=storage[key];if(typeof(storageValue)==="string"){return JSON.parse(storageValue);}}else{var cookieValue=window.spark.getCookie(key);if(typeof(cookieValue)==="string"){return JSON.parse(cookieValue);}}
return"";},clearSessionObject:function(key){var storage=window.sessionStorage||null;if(storage&&storage.clearObject){storage.clearObject(key);return true;}else if(storage){delete storage[key];return true;}
return false;},setSessionObject:function(key,value){var storage=window.sessionStorage||null;if(storage&&storage.getObject){storage.setObject(key,value);return true;}else if(storage){storage[key]=JSON.stringify(value);return true;}
return false;},getSessionObject:function(key){var storage=window.sessionStorage||null;if(storage&&storage.getObject){return storage.getObject(key);}else if(storage){var value=storage[key];if(typeof(storage[key])==="string"){return JSON.parse(value);}}
return"";},getCookie:function(key){var name=key+"=";var i=null;var ca=document.cookie.split(";");var c="";for(i=0;i<ca.length;i+=1){c=ca[i];while(c.charAt(0)==" "){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";},setCookie:function(key,value,exdays){var d=new Date();d.setTime(d.getTime()+((exdays||1)*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=key+"="+value+"; "+expires+"; path=/";},getToday:function(){var today=new Date();return(new Date(today.getFullYear(),today.getMonth(),today.getDate(),0,0,0,0));},getDateByDays:function(numDays){if(typeof(numDays)=="number"&&numDays!=0){var today=new Date();var timestamp=today.setDate(today.getDate()+numDays);return(new Date(timestamp));}
return(new Date());},getDateByWeeks:function(numWeeks){if(typeof(numWeeks)=="number"&&numWeeks!=0){var today=new Date();var timestamp=this.getDateByDays(-1*today.getDay());timestamp=today.setDate(timestamp.getDate()+(7*numWeeks));return(new Date(timestamp));}
return(new Date());},getTemplate:function(selector,data){if($(selector).length){var templateObject=kendo.template($(selector).html());if(data){return templateObject(data);}
return templateObject;}
return null;}});}
if(window.Storage){Storage.prototype.clearObject=function(key){if(this.removeItem){this.removeItem(key);}};Storage.prototype.getObject=function(key){if(this.getItem){return JSON.parse(this.getItem(key));}
return"";};Storage.prototype.setObject=function(key,value){if(this.setItem){try{var jsonValue=JSON.stringify(value);this.setItem(key,jsonValue);}
catch(err){console.warn("Unable to store peristent object in DOM: "+err);console.warn("An error was encountered while storing data to the browser. Please view the ISC logs for details.");}}};}})(jQuery,window);if(window.spark&&jQuery&&kendo){window.spark.loader=(function($,kendo){return{loadExtScreen:function(rootPath,contentID,pageName){return $.ajax({dataType:"script",url:rootPath+".js",success:function(jsResult){return $.ajax({dataType:"html",url:rootPath+".html",success:function(htmlResult){kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlResult);},error:function(result){alert("Error loading HTML file "+rootPath+".html");}});},error:function(result){alert("Error loading JavaScript file "+rootPath+".js");}});},loadExtInclude:function(filePath,contentID,modalName,options){return $.ajax({dataType:"html",url:filePath,success:function(htmlResult){kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlResult);$("[data-toggle=tooltip]").tooltip();},error:function(result){alert("Error loading template file "+filePath);}});},loadExtTemplate:function(filePath,contentID,templateID,options){return $.ajax({dataType:"html",url:filePath,success:function(tmplResult){$("#"+contentID).append(tmplResult);var template=kendo.template($("#"+templateID).html());var htmlBody=template(options||{});kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlBody);},error:function(result){alert("Error loading template file "+filePath);}});}};})(jQuery,kendo);}
if(window.spark&&jQuery&&kendo){window.spark.field={lookupTextField:"name",lookupValueField:"value",USStateList:["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MP","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"],createDatePicker:function(selector,fieldOptions){if($(selector).length){var patterns=((kendo.cultures.current||{}).calendar||{}).patterns||{};var primary=patterns.d||"MM/dd/yyyy";return $(selector).kendoDatePicker($.extend({format:primary,parseFormats:[primary,"MM/dd/yyyy","MM/dd/yy","yyyy-MM-dd"]},fieldOptions)).getKendoDatePicker();}
return null;},createDatePickerMDY:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDatePicker($.extend({format:"MM/dd/yyyy",parseFormats:["MM/dd/yyyy","MM/dd/yy","yyyy-MM-dd"]},fieldOptions)).getKendoDatePicker();}
return null;},createFormattedField:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:fieldOptions.mask||null},fieldOptions)).getKendoMaskedTextBox();}
return null;},createFormattedPhone:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:"(000) 000-0000"},fieldOptions)).getKendoMaskedTextBox();}
return null;},createFormattedSSN:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:"000-00-0000"},fieldOptions)).getKendoMaskedTextBox();}
return null;},createMultiLookup:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:new kendo.data.DataSource(),dataTextField:this.lookupTextField,dataValueField:this.lookupValueField,suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}
return null;},createSimpleLookup:function(selector,fieldOptions){if($(selector).length){if(fieldOptions.multiple===true){return $(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:[],suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}else{return $(selector).kendoDropDownList($.extend({dataSource:[],suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}}
return null;},createSingleLookup:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(),dataTextField:this.lookupTextField,dataValueField:this.lookupValueField,suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createUSStateList:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDropDownList($.extend({dataSource:this.USStateList,optionLabel:"Select",valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createInvokeLookup:function(selector,fieldOptions){if($(selector).length){var lookup=null;if(fieldOptions.multiple===true){lookup=$(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:new kendo.data.DataSource(),filter:"contains",suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}else{lookup=$(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(),filter:"contains",valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
if(!fieldOptions.invokeResource){console.log("Resource name was not specified for invoke lookup:",selector);return lookup;}
if(lookup&&fieldOptions.invokeResource){lookup._jsdo=spark.createJSDO(fieldOptions.invokeResource);if(fieldOptions.invokeMethod){lookup.fetchData=function(params){lookup._jsdo.invoke(fieldOptions.invokeMethod,(params||{})).done(function(jsdo,status,request){var response=request.response||{};if(fieldOptions.invokeDataProperty){var data=response[fieldOptions.invokeDataProperty]||[];lookup.dataSource.data(data);}else{lookup.dataSource.data(response);}});};if(fieldOptions.autoBind==undefined||fieldOptions.autoBind===true){lookup.fetchData();}}else{lookup.fetchData=function(params){console.log("Method is not currently configured for use.");};console.log("No method name provided for invoke lookup:",selector);}}
return lookup;}
return null;},createResourceLookup:function(selector,fieldOptions){if(!fieldOptions.resourceName){console.log("Resource name was not specified for resource lookup:",selector);return null;}
if($(selector).length){var dsOptions={transport:{jsdo:spark.createJSDO(fieldOptions.resourceName)},type:"jsdo"};delete fieldOptions.resourceName;var jsdoProps=dsOptions.transport.jsdo.getMethodProperties("read");if(jsdoProps&&jsdoProps.capabilities){dsOptions.serverFiltering=(jsdoProps.capabilities||"").indexOf("filter")>-1;dsOptions.serverPaging=(jsdoProps.capabilities||"").indexOf("top")>-1;dsOptions.serverSorting=(jsdoProps.capabilities||"").indexOf("sort")>-1;}
if(fieldOptions.resourceTable){dsOptions.transport.tableRef=fieldOptions.resourceTable;delete fieldOptions.resourceTable;}
if(fieldOptions.dataValueField){dsOptions.sort={field:fieldOptions.dataValueField,dir:"asc"};}
return $(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(dsOptions),filter:"contains",suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createResourceAutoComplete:function(selector,fieldOptions){if(!fieldOptions.resourceName){console.log("Resource name was not specified for resource auto-complete:",selector);return null;}
if($(selector).length){var dsOptions={transport:{jsdo:spark.createJSDO(fieldOptions.resourceName)},type:"jsdo"};delete fieldOptions.resourceName;var jsdoProps=dsOptions.transport.jsdo.getMethodProperties("read");if(jsdoProps&&jsdoProps.capabilities){dsOptions.serverFiltering=(jsdoProps.capabilities||"").indexOf("filter")>-1;dsOptions.serverPaging=(jsdoProps.capabilities||"").indexOf("top")>-1;dsOptions.serverSorting=(jsdoProps.capabilities||"").indexOf("sort")>-1;}
if(fieldOptions.resourceTable){dsOptions.transport.tableRef=fieldOptions.resourceTable;delete fieldOptions.resourceTable;}
if(fieldOptions.dataValueField){dsOptions.sort={field:fieldOptions.dataValueField,dir:"asc"};}
if(fieldOptions.dataSourceOptions){dsOptions=$.extend(dsOptions,fieldOptions.dataSourceOptions);delete fieldOptions.dataSourceOptions;}
return $(selector).kendoAutoComplete($.extend({dataSource:new kendo.data.DataSource(dsOptions),filter:"startsWith",minLength:2,virtual:true,change:function(e){e.sender.dataSource.filter({});},filtering:function(e){var filter=e.filter;if(fieldOptions.filterField){filter.field=fieldOptions.filterField;}
return filter;}},fieldOptions)).getKendoAutoComplete();}
return null;},addKeypressEvent:function(selector,fieldOptions){var _timeout=null;if($(selector).length){if(!fieldOptions.onInvalidKey){fieldOptions.onInvalidKey=function(ev){if(ev){ev.preventDefault();}
return false;}}
$(selector).keypress(function(ev){if(ev.which!==0){var value=String.fromCharCode(ev.which);if(ev.which===kendo.keys.BACKSPACE){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}else if(ev.which===kendo.keys.ENTER){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onEnter,fieldOptions.delay||400);}else if(value.match(fieldOptions.filter||/.*/)){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}else{return fieldOptions.onInvalidKey.apply(this,[ev]);}}});$(selector).keyup(function(ev){if(ev.which===kendo.keys.DELETE){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}});return true;}
return false;}};}
if(window.spark&&kendo){window.spark.form={doOnEnter:function(selector,callback,target){if($(selector).length){$(selector).on("keypress",function(ev){var keyCode=(ev.keyCode?ev.keyCode:ev.which);if(keyCode===13){if(callback&&typeof callback==="function"){setTimeout(function(){callback.apply(target||this,[ev]);},20);}}});}},doOnSubmit:function(selector,callback,target){if($(selector).length){$(selector).on("submit",function(ev){ev.preventDefault();if(callback&&typeof callback==="function"){callback.apply(target||this,[ev]);}});}},getValidator:function(selector,options){if($(selector).length){if($(selector).getKendoValidator()&&!options){return $(selector).getKendoValidator();}
return $(selector).kendoValidator($.extend({},options)).getKendoValidator();}
return null;},validate:function(selector,options){var validator=this.getValidator(selector,options);if(validator&&validator.validate){return validator.validate();}
return false;}};}
if(window.spark&&kendo){window.spark.grid={getSelectedRecord:function(event){var grid=event.sender;if(grid){return grid.dataItem(grid.select());}
return{};},getViewState:function(grid){if(grid){return{columns:grid.columns||[],filter:grid.dataSource.filter(),group:grid.dataSource.group(),sort:grid.dataSource.sort()};}
return{columns:null,filter:null,group:null,sort:null};},createReadOnlyEditor:function(){return function(container,options){container.text(options.model[options.field]);}},createFormattedFieldEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createFormattedField($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createMultiLookup:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createMultiLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];if(typeof(data)==="string"&&data.indexOf(",")>-1){data=data.split(",");}
options.sparkEditor.value(data);},20);}},createSimpleLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createSimpleLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createSingleLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createSingleLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createInvokeLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createInvokeLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);}}};}
if(window.spark&&jQuery&&kendo){window.spark.io={addExtensionClass:function(extension){switch(extension){case".jpg":case".img":case".png":case".gif":return"fa fa-file-image-o fa-3x";case".doc":case".docx":return"fa fa-file-word-o fa-3x";case".xls":case".xlsx":return"fa fa-file-excel-o fa-3x";case".pdf":return"fa fa-file-pdf-o fa-3x";case".zip":case".rar":return"fa fa-file-zip-o fa-3x";default:return"fa fa-file-o fa-3x";}},createUpload:function(selector,uploadOptions,overrides){if($(selector)){return $(selector).kendoUpload($.extend({async:{autoUpload:uploadOptions.autoUpload||false,batch:uploadOptions.batchUpload||false,saveUrl:uploadOptions.saveURL||"upload",saveField:uploadOptions.saveField||"files"},enabled:uploadOptions.enableUpload||false,multiple:uploadOptions.multiUpload||false,showFileList:uploadOptions.showFileList||false,template:uploadOptions.template||null,cancel:uploadOptions.onCancel||null,complete:uploadOptions.onComplete||null,error:uploadOptions.onError||null,progress:uploadOptions.onProgress||null,success:uploadOptions.onSuccess||null,upload:uploadOptions.onUpload||null,select:uploadOptions.onSelect||null,remove:uploadOptions.onRemove||null},overrides)).getKendoUpload();}
return null;}};}
if(window.spark&&kendo){window.spark.nav=(function(kendo){return{createSimpleRouter:function(options){if(!options){options={};}
if(!options.mainContentID||options.mainContentID===""){options.mainContentID="mainContent";}
var router=new kendo.Router({change:options.onChange||function(ev){}});router.route("/",function(){var promise=jQuery.Deferred();if(options.getLandingPage){promise=options.getLandingPage();}else{promise.resolve("");}
promise.done(function(page){if(page!==""){var path=options.filePathPrefix+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path);}});}else{if(options.onLoad){options.onLoad("");}}});});router.route("/logout",function(){spark.getJsdoSession().logout().then(function(){if(options.onLogout){options.onLogout();}});});router.route("/:page",function(page){var path=options.filePathPrefix+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path);}});});router.route("/:sec/:page",function(sec,page){var path=options.filePathPrefix+sec+"/"+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path,sec);}});});router.route("/:sec/:sub/:page",function(sec,sub,page){var path=options.filePathPrefix+sec+"/"+sub+"/"+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path,sec,sub);}});});return router;},createVerticalStackMenu:function(selector,menuData){if($(selector)){$(selector).empty();var navItem=$('<nav class="nav-primary hidden-xs" data-ride="collapse" role="navigation"></nav>');var navList=$('<ul class="nav" data-ride="collapse"></ul>');if(typeof(menuData)==="object"){$.each(menuData,function(i,parent){var currentPath="";if(app.currentPage.path&&app.currentPage.path!=""){currentPath="#"+app.currentPage.path.replace("app/views","");}
var navParentLink=$('<a href="javascript:void(0)" class="auto nav-link"></a>');if(parent.icon){navParentLink.append($('<i class="fa '+parent.icon+' m-r-xs"></i>'));}
var navParent=$('<li class="nav-item"></li>');navParentLink.append($('<span>'+parent.text+'</span>'));navParent.append(navParentLink);var navChildList=$('<ul class="nav dker"></ul>');if(typeof(parent.items)==="object"){$.each(parent.items,function(j,child){var navChildLink=$('<a class="nav-link"></a>');navChildLink.attr("href",child.url);if(child.url.indexOf("http")===0){navChildLink.attr("target","_blank");}
var navChild=$('<li class="nav-item"></li>');navChild.append(navChildLink.text(child.text));navChildList.append(navChild);if(currentPath!=""&&currentPath==child.url){navParent.addClass("active");navChildLink.addClass("active");}});}
navParent.append(navChildList);navList.append(navParent);});}
navItem.append(navList);$(selector).append(navItem);}else{console.info("No menu element has been defined.");}}};})(kendo);}
if(window.spark&&jQuery&&kendo){window.spark.notify=(function($,kendo){return{setNotificationArea:function(selector,options){var notificationObj=null;if($(selector).length){notificationObj=$(selector).kendoNotification($.extend({appendTo:selector,autoHideAfter:30000,button:true},options)).getKendoNotification();notificationObj.showNotification=function(message,type){var self=this;if(self){if(typeof(message)==="string"){self.show(message||"",type||"info");}else if(Array.isArray(message)){$.each(message,function(i,msg){self.show(msg||"",type||"info");});}
if(this.options.appendTo){var container=$(self.options.appendTo);if(container.length){container.scrollTop(container[0].scrollHeight);}}}};}
return notificationObj;}};})(jQuery,kendo);}
(function($,window){"use strict";if($&&typeof window.spark!=="undefined"){window.spark=$.extend(window.spark,{getUrlParams:function(){var search=location.search.substring(1);return search?JSON.parse('{"'+search.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(key,value){return key===""?value:decodeURIComponent(value)}):{};},clearPersistentObject:function(key){var storage=window.localStorage||null;if(storage&&storage.clearObject){storage.clearObject(key);return true;}else if(storage){delete storage[key];return true;}else{window.spark.setCookie(key,"");return true;}
return false;},setPersistentObject:function(key,value){var storage=window.localStorage||null;if(storage&&storage.getObject){storage.setObject(key,value);return true;}else if(storage){storage[key]=JSON.stringify(value);return true;}else{window.spark.setCookie(key,JSON.stringify(value));return true;}
return false;},getPersistentObject:function(key){var storage=window.localStorage||null;if(storage&&storage.getObject){return storage.getObject(key);}else if(storage){var storageValue=storage[key];if(typeof(storageValue)==="string"){return JSON.parse(storageValue);}}else{var cookieValue=window.spark.getCookie(key);if(typeof(cookieValue)==="string"){return JSON.parse(cookieValue);}}
return"";},clearSessionObject:function(key){var storage=window.sessionStorage||null;if(storage&&storage.clearObject){storage.clearObject(key);return true;}else if(storage){delete storage[key];return true;}
return false;},setSessionObject:function(key,value){var storage=window.sessionStorage||null;if(storage&&storage.getObject){storage.setObject(key,value);return true;}else if(storage){storage[key]=JSON.stringify(value);return true;}
return false;},getSessionObject:function(key){var storage=window.sessionStorage||null;if(storage&&storage.getObject){return storage.getObject(key);}else if(storage){var value=storage[key];if(typeof(storage[key])==="string"){return JSON.parse(value);}}
return"";},getCookie:function(key){var name=key+"=";var i=null;var ca=document.cookie.split(";");var c="";for(i=0;i<ca.length;i+=1){c=ca[i];while(c.charAt(0)==" "){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";},setCookie:function(key,value,exdays){var d=new Date();d.setTime(d.getTime()+((exdays||1)*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=key+"="+value+"; "+expires+"; path=/";},getToday:function(){var today=new Date();return(new Date(today.getFullYear(),today.getMonth(),today.getDate(),0,0,0,0));},getDateByDays:function(numDays){if(typeof(numDays)=="number"&&numDays!=0){var today=new Date();var timestamp=today.setDate(today.getDate()+numDays);return(new Date(timestamp));}
return(new Date());},getDateByWeeks:function(numWeeks){if(typeof(numWeeks)=="number"&&numWeeks!=0){var today=new Date();var timestamp=this.getDateByDays(-1*today.getDay());timestamp=today.setDate(timestamp.getDate()+(7*numWeeks));return(new Date(timestamp));}
return(new Date());},getTemplate:function(selector,data){if($(selector).length){var templateObject=kendo.template($(selector).html());if(data){return templateObject(data);}
return templateObject;}
return null;}});}
if(window.Storage){Storage.prototype.clearObject=function(key){if(this.removeItem){this.removeItem(key);}};Storage.prototype.getObject=function(key){if(this.getItem){return JSON.parse(this.getItem(key));}
return"";};Storage.prototype.setObject=function(key,value){if(this.setItem){try{var jsonValue=JSON.stringify(value);this.setItem(key,jsonValue);}
catch(err){console.warn("Unable to store peristent object in DOM: "+err);console.warn("An error was encountered while storing data to the browser. Please view the ISC logs for details.");}}};}})(jQuery,window);if(window.spark&&jQuery&&kendo){window.spark.loader=(function($,kendo){return{loadExtScreen:function(rootPath,contentID,pageName){return $.ajax({dataType:"script",url:rootPath+".js",success:function(jsResult){return $.ajax({dataType:"html",url:rootPath+".html",success:function(htmlResult){kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlResult);},error:function(result){alert("Error loading HTML file "+rootPath+".html");}});},error:function(result){alert("Error loading JavaScript file "+rootPath+".js");}});},loadExtInclude:function(filePath,contentID,modalName,options){return $.ajax({dataType:"html",url:filePath,success:function(htmlResult){kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlResult);$("[data-toggle=tooltip]").tooltip();},error:function(result){alert("Error loading template file "+filePath);}});},loadExtTemplate:function(filePath,contentID,templateID,options){return $.ajax({dataType:"html",url:filePath,success:function(tmplResult){$("#"+contentID).append(tmplResult);var template=kendo.template($("#"+templateID).html());var htmlBody=template(options||{});kendo.destroy($("#"+contentID).children());$("#"+contentID).empty();$("#"+contentID).html(htmlBody);},error:function(result){alert("Error loading template file "+filePath);}});}};})(jQuery,kendo);}
if(window.spark&&jQuery&&kendo){window.spark.field={lookupTextField:"name",lookupValueField:"value",USStateList:["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MP","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"],getSelectedRecord:function(field){try{if(field.dataSource&&field.select){var data=field.dataSource.data();if(field.select()>-1&&data.length>0){return data[field.select()];}}}catch(e){}
return{};},createDatePicker:function(selector,fieldOptions){if($(selector).length){var patterns=((kendo.cultures.current||{}).calendar||{}).patterns||{};var primary=patterns.d||"MM/dd/yyyy";return $(selector).kendoDatePicker($.extend({format:primary,parseFormats:[primary,"MM/dd/yyyy","MM/dd/yy","yyyy-MM-dd"]},fieldOptions)).getKendoDatePicker();}
return null;},createDatePickerMDY:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDatePicker($.extend({format:"MM/dd/yyyy",parseFormats:["MM/dd/yyyy","MM/dd/yy","yyyy-MM-dd"]},fieldOptions)).getKendoDatePicker();}
return null;},createFormattedField:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:fieldOptions.mask||null},fieldOptions)).getKendoMaskedTextBox();}
return null;},createFormattedPhone:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:"(000) 000-0000"},fieldOptions)).getKendoMaskedTextBox();}
return null;},createFormattedSSN:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMaskedTextBox($.extend({mask:"000-00-0000"},fieldOptions)).getKendoMaskedTextBox();}
return null;},createMultiLookup:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:new kendo.data.DataSource(),dataTextField:this.lookupTextField,dataValueField:this.lookupValueField,suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}
return null;},createSimpleLookup:function(selector,fieldOptions){if($(selector).length){if(fieldOptions.multiple===true){return $(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:[],suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}else{return $(selector).kendoDropDownList($.extend({dataSource:[],suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}}
return null;},createSingleLookup:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(),dataTextField:this.lookupTextField,dataValueField:this.lookupValueField,suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createUSStateList:function(selector,fieldOptions){if($(selector).length){return $(selector).kendoDropDownList($.extend({dataSource:this.USStateList,optionLabel:"Select",valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createInvokeLookup:function(selector,fieldOptions){if($(selector).length){var lookup=null;if(fieldOptions.multiple===true){lookup=$(selector).kendoMultiSelect($.extend({autoClose:false,dataSource:new kendo.data.DataSource(),filter:"contains",suggest:true,valuePrimitive:true},fieldOptions)).getKendoMultiSelect();}else{lookup=$(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(),filter:"contains",valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
if(!fieldOptions.invokeResource){console.log("Resource name was not specified for invoke lookup:",selector);return lookup;}
if(lookup&&fieldOptions.invokeResource){lookup._jsdo=spark.createJSDO(fieldOptions.invokeResource);if(fieldOptions.invokeMethod){lookup.fetchData=function(params){return lookup._jsdo.invoke(fieldOptions.invokeMethod,(params||{})).done(function(jsdo,status,request){var response=request.response||{};if(fieldOptions.invokeDataProperty){var data=response[fieldOptions.invokeDataProperty]||[];lookup.dataSource.data(data);}else{lookup.dataSource.data(response);}});};if(fieldOptions.autoBind==undefined||fieldOptions.autoBind===true){lookup.fetchData();}}else{lookup.fetchData=function(params){console.log("Method is not currently configured for use.");};console.log("No method name provided for invoke lookup:",selector);}}
return lookup;}
return null;},createResourceLookup:function(selector,fieldOptions){if(!fieldOptions.resourceName){console.log("Resource name was not specified for resource lookup:",selector);return null;}
if($(selector).length){var dsOptions={transport:{jsdo:spark.createJSDO(fieldOptions.resourceName)},type:"jsdo"};delete fieldOptions.resourceName;var jsdoProps=dsOptions.transport.jsdo.getMethodProperties("read");if(jsdoProps&&jsdoProps.capabilities){dsOptions.serverFiltering=(jsdoProps.capabilities||"").indexOf("filter")>-1;dsOptions.serverPaging=(jsdoProps.capabilities||"").indexOf("top")>-1;dsOptions.serverSorting=(jsdoProps.capabilities||"").indexOf("sort")>-1;}
if(fieldOptions.resourceTable){dsOptions.transport.tableRef=fieldOptions.resourceTable;delete fieldOptions.resourceTable;}
if(fieldOptions.dataValueField){dsOptions.sort={field:fieldOptions.dataValueField,dir:"asc"};}
return $(selector).kendoDropDownList($.extend({dataSource:new kendo.data.DataSource(dsOptions),filter:"contains",suggest:true,valuePrimitive:true},fieldOptions)).getKendoDropDownList();}
return null;},createResourceAutoComplete:function(selector,fieldOptions){if($(selector).length){if(!fieldOptions.resourceName){console.log("Resource name was not specified for resource auto-complete:",selector);return null;}
var dsOptions={transport:{jsdo:spark.createJSDO(fieldOptions.resourceName)},type:"jsdo",requestStart:function(e){var filters=(this.filter()||{}).filters||[];if(filters.length===0||(filters[0]||{}).value==""){e.preventDefault();return false;}else if(filters.length>1){e.sender.filter(filters[0]);e.preventDefault();return false;}}};delete fieldOptions.resourceName;var jsdoProps=dsOptions.transport.jsdo.getMethodProperties("read");if(jsdoProps&&jsdoProps.capabilities){dsOptions.serverFiltering=(jsdoProps.capabilities||"").indexOf("filter")>-1;dsOptions.serverPaging=(jsdoProps.capabilities||"").indexOf("top")>-1;dsOptions.serverSorting=(jsdoProps.capabilities||"").indexOf("sort")>-1;}
if(fieldOptions.pageSize){dsOptions.pageSize=fieldOptions.pageSize;delete fieldOptions.pageSize;}
if(fieldOptions.resourceTable){dsOptions.transport.tableRef=fieldOptions.resourceTable;delete fieldOptions.resourceTable;}
if(fieldOptions.dataValueField){dsOptions.sort={field:fieldOptions.dataValueField,dir:"asc"};}
if(fieldOptions.dataSourceOptions){dsOptions=$.extend(dsOptions,fieldOptions.dataSourceOptions);delete fieldOptions.dataSourceOptions;}
return $(selector).kendoAutoComplete($.extend({dataSource:new kendo.data.DataSource(dsOptions),delay:400,filter:"startsWith",minLength:2,virtual:true,change:function(e){},filtering:function(e){var filter=e.filter;if(fieldOptions.filterField){filter.field=fieldOptions.filterField;}
return filter;}},fieldOptions)).getKendoAutoComplete();}
return null;},addKeypressEvent:function(selector,fieldOptions){var _timeout=null;if($(selector).length){if(!fieldOptions.onInvalidKey){fieldOptions.onInvalidKey=function(ev){if(ev){ev.preventDefault();}
return false;}}
$(selector).keypress(function(ev){if(ev.which!==0){var value=String.fromCharCode(ev.which);if(ev.which===kendo.keys.BACKSPACE){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}else if(ev.which===kendo.keys.ENTER){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onEnter,fieldOptions.delay||400);}else if(value.match(fieldOptions.filter||/.*/)){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}else{return fieldOptions.onInvalidKey.apply(this,[ev]);}}});$(selector).keyup(function(ev){if(ev.which===kendo.keys.DELETE){clearTimeout(_timeout);_timeout=setTimeout(fieldOptions.onValidKey,fieldOptions.delay||400);}});return true;}
return false;}};}
if(window.spark&&kendo){window.spark.form={doOnEnter:function(selector,callback,target){if($(selector).length){$(selector).on("keypress",function(ev){var keyCode=(ev.keyCode?ev.keyCode:ev.which);if(keyCode===13){if(callback&&typeof callback==="function"){setTimeout(function(){callback.apply(target||this,[ev]);},20);}}});}},doOnSubmit:function(selector,callback,target){if($(selector).length){$(selector).on("submit",function(ev){ev.preventDefault();if(callback&&typeof callback==="function"){callback.apply(target||this,[ev]);}});}},getValidator:function(selector,options){if($(selector).length){if($(selector).getKendoValidator()&&!options){return $(selector).getKendoValidator();}
return $(selector).kendoValidator($.extend({},options)).getKendoValidator();}
return null;},reset:function(selector,options){if($(selector).length){var validator=this.getValidator(selector,options);if(validator){if($(selector)[0]&&$(selector)[0].reset){$(selector)[0].reset();}
validator.hideMessages();}}},validate:function(selector,options){var validator=this.getValidator(selector,options);if(validator&&validator.validate){return validator.validate();}
return false;},getErrors:function(selector){var validator=this.getValidator(selector);if(validator&&validator.errors){return validator.errors();}
return[];},translateForm:function(selector,translator,options){var inputs=$(selector+" input");$.each(inputs,function(i,el){var req=$(el).attr("required");var drm=$(el).attr("data-required-msg");if(drm&&drm!==""){$(el).attr("data-required-msg",translator(drm));}
var ph=$(el).attr("placeholder");if(ph&&ph!==""){$(el).attr("placeholder",translator(ph));if(req&&!drm){drm=(ph+" is required");$(el).attr("data-required-msg",translator(drm));}}
var name=$(el).attr("name");if(name&&name!==""){name=name.replace(/([A-Z])/g," $1").trim();name=name.replace(/^./,function(str){return str.toUpperCase();});if(!ph){$(el).attr("placeholder",translator(name));}
var drm=$(el).attr("data-required-msg");if(req&&!drm){drm=(name+" is required");$(el).attr("data-required-msg",translator(drm));}}});var textarea=$(selector+" textarea");$.each(textarea,function(i,el){var req=$(el).attr("required");var drm=$(el).attr("data-required-msg");if(drm&&drm!==""){$(el).attr("data-required-msg",translator(drm));}
var ph=$(el).attr("placeholder");if(ph&&ph!==""){$(el).attr("placeholder",translator(ph));if(req&&!drm){drm=(ph+" is required");$(el).attr("data-required-msg",translator(drm));}}
var name=$(el).attr("name");if(name&&name!==""){name=name.replace(/([A-Z])/g," $1").trim();name=name.replace(/^./,function(str){return str.toUpperCase();});if(!ph){$(el).attr("placeholder",translator(name));}
var drm=$(el).attr("data-required-msg");if(req&&!drm){drm=(name+" is required");$(el).attr("data-required-msg",translator(drm));}}});var labels=$(selector+" label");$.each(labels,function(i,el){var isFor=$(el).attr("for");if(isFor){$(el).html(translator($(el).html()));if(options&&options.showRequiredIndicator){var input=$(selector+" input[name="+isFor+"]");if(!input.length){input=$(selector+" textarea[name="+isFor+"]");}
if(input.length&&$(input).attr("required")){$(el).prepend('<span class="text-danger m-r-xxs">'+(options.requiredIndicator||"*")+'</span>');}}}
var helpTopic=$(el).attr("help");if(helpTopic){var help=$('<i class="fa fa-question-circle m-l-xs" data-container="body" data-placement="top" data-toggle="popover" data-content="'+translator(helpTopic)+'"></i>');$(el).append(help);}});$("[data-toggle=popover]").popover();}};}
if(window.spark&&kendo){window.spark.grid={getSelectedRecord:function(event,grid){if(grid){var tr=$(event.target).closest("tr");return grid.dataItem(tr);}else{grid=event.sender;if(grid){return grid.dataItem(grid.select());}}
return{};},getViewState:function(grid){if(grid){return{columns:grid.columns||[],filter:grid.dataSource.filter(),group:grid.dataSource.group(),sort:grid.dataSource.sort()};}
return{columns:null,filter:null,group:null,sort:null};},createReadOnlyEditor:function(){return function(container,options){container.text(options.model[options.field]);}},createFormattedFieldEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createFormattedField($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createMultiLookup:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createMultiLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];if(typeof(data)==="string"&&data.indexOf(",")>-1){data=data.split(",");}
options.sparkEditor.value(data);},20);}},createSimpleLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createSimpleLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createSingleLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createSingleLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);setTimeout(function(){var data=options.model[options.field]||options.model.defaults[options.field];options.sparkEditor.value(data);},20);}},createInvokeLookupEditor:function(fieldOptions){return function(container,options){options.sparkEditor=spark.field.createInvokeLookup($('<input data-bind="value:'+options.field+'"/>').appendTo(container),fieldOptions);}}};}
if(window.spark&&jQuery&&kendo){window.spark.io={addExtensionClass:function(extension){switch(extension){case".jpg":case".img":case".png":case".gif":return"fa fa-file-image-o fa-3x";case".doc":case".docx":return"fa fa-file-word-o fa-3x";case".xls":case".xlsx":return"fa fa-file-excel-o fa-3x";case".pdf":return"fa fa-file-pdf-o fa-3x";case".zip":case".rar":return"fa fa-file-zip-o fa-3x";default:return"fa fa-file-o fa-3x";}},createUpload:function(selector,uploadOptions,overrides){if($(selector)){return $(selector).kendoUpload($.extend({async:{autoUpload:uploadOptions.autoUpload||false,batch:uploadOptions.batchUpload||false,saveUrl:uploadOptions.saveURL||"upload",saveField:uploadOptions.saveField||"files"},enabled:uploadOptions.enableUpload||false,multiple:uploadOptions.multiUpload||false,showFileList:uploadOptions.showFileList||false,template:uploadOptions.template||null,cancel:uploadOptions.onCancel||null,complete:uploadOptions.onComplete||null,error:uploadOptions.onError||null,progress:uploadOptions.onProgress||null,success:uploadOptions.onSuccess||null,upload:uploadOptions.onUpload||null,select:uploadOptions.onSelect||null,remove:uploadOptions.onRemove||null},overrides)).getKendoUpload();}
return null;}};}
if(window.spark&&kendo){window.spark.nav=(function(kendo){return{createSimpleRouter:function(options){if(!options){options={};}
if(!options.mainContentID||options.mainContentID===""){options.mainContentID="mainContent";}
var router=new kendo.Router({change:options.onChange||function(ev){}});router.loggedIn=false;router.menuData=[];router.isSecurePage=function(url){var isSecure=false;$.each(this.menuData||[],function(i,topItem){if(topItem.items){$.each(topItem.items,function(i,menuItem){if(menuItem.url==url){isSecure=(menuItem.secure===true);}});}});return isSecure;};router.route("/",function(){var promise=jQuery.Deferred();if(options.getLandingPage){promise=options.getLandingPage();}else{promise.resolve("");}
promise.done(function(page){if(page!==""){var path=options.filePathPrefix+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path);}});}else{if(options.onLoad){options.onLoad("");}}});});router.route("/logout",function(){spark.getJsdoSession().logout().then(function(){if(options.onLogout){options.onLogout();}});});router.route("/:page",function(page){var path=options.filePathPrefix+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path);}});});router.route("/:sec/:page",function(sec,page){var path=options.filePathPrefix+sec+"/"+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path,sec);}});});router.route("/:sec/:sub/:page",function(sec,sub,page){var path=options.filePathPrefix+sec+"/"+sub+"/"+page;spark.loader.loadExtScreen(path,options.mainContentID,page).complete(function(){if(options.onLoad){options.onLoad(page,path,sec,sub);}});});return router;},createVerticalStackMenu:function(selector,menuData){if($(selector)){$(selector).empty();var navItem=$('<nav class="nav-primary hidden-xs" data-ride="collapse" role="navigation"></nav>');var navList=$('<ul class="nav" data-ride="collapse"></ul>');if(typeof(menuData)==="object"){$.each(menuData,function(i,parent){var currentPath="";if(app.currentPage.path&&app.currentPage.path!=""){currentPath="#"+app.currentPage.path.replace("app/views","");}
var navParentLink=$('<a href="javascript:void(0)" class="auto nav-link"></a>');if(parent.icon){navParentLink.append($('<i class="fa '+parent.icon+' m-r-xs"></i>'));}
var navParent=$('<li class="nav-item"></li>');navParentLink.append($('<span>'+parent.text+'</span>'));navParent.append(navParentLink);var navChildList=$('<ul class="nav dker"></ul>');if(typeof(parent.items)==="object"){$.each(parent.items,function(j,child){var navChildLink=$('<a class="nav-link"></a>');navChildLink.attr("href",child.url);if(child.url.indexOf("http")===0){navChildLink.attr("target","_blank");}
var navChild=$('<li class="nav-item"></li>');navChild.append(navChildLink.text(child.text));navChildList.append(navChild);if(currentPath!=""&&currentPath==child.url){navParent.addClass("active");navChildLink.addClass("active");}});}
navParent.append(navChildList);navList.append(navParent);});}
navItem.append(navList);$(selector).append(navItem);}else{console.info("No menu element has been defined.");}}};})(kendo);}
if(window.spark&&jQuery&&kendo){window.spark.notify=(function($,kendo){return{setNotificationArea:function(selector,options){var notificationObj=null;if($(selector).length){notificationObj=$(selector).kendoNotification($.extend({appendTo:selector,autoHideAfter:30000,button:true},options)).getKendoNotification();notificationObj.showNotification=function(message,type){var self=this;if(self){if(typeof(message)==="string"){self.show(message||"",type||"info");}else if(Array.isArray(message)){$.each(message,function(i,msg){self.show(msg||"",type||"info");});}
if(this.options.appendTo){var container=$(self.options.appendTo);if(container.length){container.scrollTop(container[0].scrollHeight);}}}};}
return notificationObj;}};})(jQuery,kendo);}
if(window.spark&&kendo){window.spark.strings={_translatedStrings:{},_translationRequests:[],trackTranslations:false,addTranslatedStrings:function(newStrings){if(typeof newStrings==="object"){this._translatedStrings=$.extend(this._translatedStrings,newStrings);}},getTranslatedString:function(originalText){this.trackTranslation(originalText);if(this._translatedStrings&&this._translatedStrings[originalText]){return this._translatedStrings[originalText];}
return originalText;},trackTranslation:function(translationRequest){if(this.trackTranslations){if(translationRequest&&translationRequest!==""&&this._translationRequests.indexOf(translationRequest)===-1){this._translationRequests.push(translationRequest);}}
return this._translationRequests;}};}